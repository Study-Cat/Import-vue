{"remainingRequest":"F:\\HbuilderXObject\\vueTest\\node_modules\\babel-loader\\lib\\index.js!F:\\HbuilderXObject\\vueTest\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\HbuilderXObject\\vueTest\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\HbuilderXObject\\vueTest\\src\\components\\import.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\HbuilderXObject\\vueTest\\src\\components\\import.vue","mtime":1600671347881},{"path":"F:\\HbuilderXObject\\vueTest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600616452791},{"path":"F:\\HbuilderXObject\\vueTest\\node_modules\\babel-loader\\lib\\index.js","mtime":1600616468060},{"path":"F:\\HbuilderXObject\\vueTest\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600616452791},{"path":"F:\\HbuilderXObject\\vueTest\\node_modules\\vue-loader\\lib\\index.js","mtime":1600616465697}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.typed.uint8-array\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      limitUpload: 1,\n      fileTemp: null,\n      file: null,\n      da: [],\n      dalen: 0\n    };\n  },\n  methods: {\n    // 添加文件和上传成功和失败都会执行该文件\n    handleChange: function handleChange(file, fileList) {\n      console.log(\"handleChangec参数：\", file);\n      this.fileTemp = file.raw; //获取上传文件的头部的信息\n\n      if (this.fileTemp) {\n        //判断头部是不是为空\n        if (this.fileTemp.type == 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' || this.fileTemp.type == 'application/vnd.ms-excel') {\n          //判断头部是否符合设置\n          this.importfxx(this.fileTemp); //调用文件上传方法\n        } else {\n          //文件格式不对时，提示信息\n          this.$message({\n            type: 'warning',\n            message: '附件格式错误，请删除后重新上传！'\n          });\n        }\n      } else {\n        //文件头部是空\n        this.$message({\n          type: 'warning',\n          message: '请上传附件！'\n        });\n      }\n    },\n    //超出文件最大的数量，有关参数limitUpload\n    handleExceed: function handleExceed() {\n      this.$message({\n        type: 'warning',\n        message: '超出最大上传文件数量的限制！'\n      });\n      return;\n    },\n    //文件移除时的钩子\n    handleRemove: function handleRemove(file, fileList) {\n      this.fileTemp = null;\n    },\n    //文件上传方法\n    importfxx: function importfxx(obj) {\n      var _this = this;\n\n      var inputDOM = this.$refs.inputer; // 通过DOM取文件数据\n\n      console.log(\"_this的数据\", _this);\n      console.log(\"inputDOM数据\", inputDOM);\n      this.file = event.currentTarget.files[0];\n      console.log(\"event数据\", event);\n      var rABS = false; //是否将文件读取为二进制字符串\n\n      var f = this.file;\n      var reader = new FileReader(); //if (!FileReader.prototype.readAsBinaryString) {\n\n      FileReader.prototype.readAsBinaryString = function (f) {\n        var binary = \"\";\n        var rABS = false; //是否将文件读取为二进制字符串\n\n        var pt = this;\n        var wb; //读取完成的数据\n\n        var outdata;\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n          var bytes = new Uint8Array(reader.result);\n          var length = bytes.byteLength;\n\n          for (var i = 0; i < length; i++) {\n            binary += String.fromCharCode(bytes[i]);\n          }\n\n          var XLSX = require(\"xlsx\");\n\n          if (rABS) {\n            wb = XLSX.read(btoa(fixdata(binary)), {\n              //手动转化\n              type: \"base64\"\n            });\n          } else {\n            wb = XLSX.read(binary, {\n              type: \"binary\"\n            });\n          }\n\n          outdata = XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]]); //outdata就是你想要的东西\n\n          console.log('未处理的原始数据如下：');\n          console.log(outdata); //此处可对数据进行处理\n\n          var arr = [];\n          outdata.map(function (v) {\n            var obj = {};\n            obj.code = v['Code'];\n            obj.name = v['Name'];\n            obj.pro = v['province'];\n            obj.cit = v['city'];\n            obj.dis = v['district'];\n            arr.push(obj);\n          });\n          _this.da = arr;\n          _this.dalen = arr.length;\n          return arr;\n        };\n\n        reader.readAsArrayBuffer(f);\n      };\n\n      if (rABS) {\n        reader.readAsArrayBuffer(f);\n      } else {\n        reader.readAsBinaryString(f);\n      }\n    }\n  }\n};",{"version":3,"sources":["import.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!--limit:最大上传数，on-exceed：超过最大上传数量时的操作  on-change:上传成功和失败都会执行-->\r\n\t\t<el-upload\r\n\t\t    class=\"upload-demo\"\r\n\t\t    action=\"\"\r\n\t\t    :on-change=\"handleChange\"\r\n\t\t    :on-remove=\"handleRemove\"\r\n\t\t    :on-exceed=\"handleExceed\"\r\n\t\t    :limit=\"limitUpload\"\r\n\t\t    accept=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel\"\r\n\t\t    :auto-upload=\"false\">\r\n\t\t<el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n\t\t<div slot=\"tip\" class=\"el-upload__tip\">只 能 上 传 xlsx / xls 文 件</div>\r\n\t\t</el-upload>\r\n\t\t\r\n\t\t<!-- 数据展示 -->\r\n\t\t  <el-main>\r\n\t\t      <el-table :data=\"da\">\r\n\t\t        <el-table-column prop=\"code\" label=\"编号\">\r\n\t\t        </el-table-column>\r\n\t\t        <el-table-column prop=\"name\" label=\"姓名\">\r\n\t\t        </el-table-column>\r\n\t\t        <el-table-column prop=\"pro\" label=\"省份\">\r\n\t\t        </el-table-column>\r\n\t\t        <el-table-column prop=\"cit\" label=\"城市\">\r\n\t\t        </el-table-column>\r\n\t\t        <el-table-column prop=\"dis\" label=\"区县\">\r\n\t\t        </el-table-column>\r\n\t\t      </el-table>\r\n\t\t    </el-main>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default{\r\n\t\tdata(){\r\n\t\t\treturn{\r\n\t\t\t\tlimitUpload:1,\r\n\t\t\t\tfileTemp:null,\r\n\t\t\t\tfile:null,\r\n\t\t\t\tda:[],\r\n\t\t\t\tdalen:0\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t// 添加文件和上传成功和失败都会执行该文件\r\n\t\t\thandleChange(file, fileList){ \r\n\t\t\t\tconsole.log(\"handleChangec参数：\",file);\r\n\t\t\t    this.fileTemp = file.raw; //获取上传文件的头部的信息\r\n\t\t\t    if(this.fileTemp){ //判断头部是不是为空\r\n\t\t\t        if((this.fileTemp.type == 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet') \r\n\t\t\t            || (this.fileTemp.type == 'application/vnd.ms-excel')){ //判断头部是否符合设置\r\n\t\t\t            this.importfxx(this.fileTemp); //调用文件上传方法\r\n\t\t\t        } else { //文件格式不对时，提示信息\r\n\t\t\t            this.$message({\r\n\t\t\t                type:'warning',\r\n\t\t\t                message:'附件格式错误，请删除后重新上传！'\r\n\t\t\t            })\r\n\t\t\t        }\r\n\t\t\t    } else { //文件头部是空\r\n\t\t\t        this.$message({\r\n\t\t\t            type:'warning',\r\n\t\t\t            message:'请上传附件！'\r\n\t\t\t        })\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\t//超出文件最大的数量，有关参数limitUpload\r\n\t\t\thandleExceed(){\r\n\t\t\t    this.$message({\r\n\t\t\t        type:'warning',\r\n\t\t\t        message:'超出最大上传文件数量的限制！'\r\n\t\t\t    })\r\n\t\t\t    return;\r\n\t\t\t},\r\n\t\t\t//文件移除时的钩子\r\n\t\t\thandleRemove(file,fileList){\r\n\t\t\t    this.fileTemp = null\r\n\t\t\t},\r\n\t\t\t//文件上传方法\r\n\t\t\timportfxx(obj) {\r\n\t\t\t    let _this = this;\r\n\t\t\t    let inputDOM = this.$refs.inputer;\r\n\t\t\t    // 通过DOM取文件数据\r\n\t\t\t\tconsole.log(\"_this的数据\",_this);\r\n\t\t\t\tconsole.log(\"inputDOM数据\",inputDOM);\r\n\t\t\t    this.file = event.currentTarget.files[0];\r\n\t\t\t\tconsole.log(\"event数据\",event);\r\n\t\t\t    var rABS = false; //是否将文件读取为二进制字符串\r\n\t\t\t    var f = this.file;\r\n\t\t\t\r\n\t\t\t    var reader = new FileReader();\r\n\t\t\t    //if (!FileReader.prototype.readAsBinaryString) {\r\n\t\t\t    FileReader.prototype.readAsBinaryString = function(f) {\r\n\t\t\t        var binary = \"\";\r\n\t\t\t        var rABS = false; //是否将文件读取为二进制字符串\r\n\t\t\t        var pt = this;\r\n\t\t\t        var wb; //读取完成的数据\r\n\t\t\t        var outdata;\r\n\t\t\t        var reader = new FileReader();\r\n\t\t\t        reader.onload = function(e) {\r\n\t\t\t            var bytes = new Uint8Array(reader.result);\r\n\t\t\t            var length = bytes.byteLength;\r\n\t\t\t            for (var i = 0; i < length; i++) {\r\n\t\t\t                binary += String.fromCharCode(bytes[i]);\r\n\t\t\t            }\r\n\t\t\t            var XLSX = require(\"xlsx\");\r\n\t\t\t            if (rABS) {\r\n\t\t\t                wb = XLSX.read(btoa(fixdata(binary)), {\r\n\t\t\t                //手动转化\r\n\t\t\t                type: \"base64\"\r\n\t\t\t                });\r\n\t\t\t            } else {\r\n\t\t\t                wb = XLSX.read(binary, {\r\n\t\t\t                type: \"binary\"\r\n\t\t\t                });\r\n\t\t\t            }\r\n\t\t\t            outdata = XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]]); //outdata就是你想要的东西\r\n\t\t\t            console.log('未处理的原始数据如下：');\r\n\t\t\t            console.log(outdata);\r\n\t\t\t            //此处可对数据进行处理\r\n\t\t\t            let arr = [];\r\n\t\t\t            outdata.map(v => {\r\n\t\t\t                let obj = {}\r\n\t\t\t                obj.code = v['Code']\r\n\t\t\t                obj.name = v['Name']\r\n\t\t\t                obj.pro = v['province']\r\n\t\t\t                obj.cit = v['city']\r\n\t\t\t                obj.dis = v['district']\r\n\t\t\t                arr.push(obj)\r\n\t\t\t            });\r\n\t\t\t            _this.da=arr;\r\n\t\t\t            _this.dalen=arr.length;\r\n\t\t\t            return arr;\r\n\t\t\t        };\r\n\t\t\t        reader.readAsArrayBuffer(f);\r\n\t\t\t    };\r\n\t\t\t    if (rABS) {\r\n\t\t\t        reader.readAsArrayBuffer(f);\r\n\t\t\t    } else {\r\n\t\t\t        reader.readAsBinaryString(f);\r\n\t\t\t    }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n</script>\r\n\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":"src/components"}]}